# ตัวอย่างจุดเข้าซื้อ 3 ไม้แรกของบันไดสะสม (ZECUSDT)

ค่าเริ่มต้นจากไฟล์ `config.yaml` (ปรับให้ตรงโจทย์ใหม่):
- `d_buy = 0.03` เริ่มต้นใช้ระยะห่าง 3% ต่อขั้นเพื่อเก็บไม้แรกเร็ว ๆ
- `n_steps = 3` จำกัดการสะสมลึกสุด 3 ไม้ในช่วงแรก

สูตรคำนวณราคาซื้อแต่ละขั้น (ใช้ในโค้ด `compute_ladder_prices`):

```
P_k = P0 * (1 - d_buy)^k                            # gap_mode = additive
P_k = P0 * ∏_{i=0..k-1} (1 - d_buy * gap_factor^i)   # gap_mode = multiplicative
```

โดย `P0` คือราคาปิดแท่งล่าสุดขณะเริ่มรอบใหม่ (เช่น 502.1100 USDT จาก log ตัวอย่าง) และหากใช้ `gap_mode: multiplicative`
จะได้ระยะห่างลึกขึ้นเรื่อย ๆ ตาม `gap_factor` (เช่น 1.08 = กว้างขึ้น 8% ต่อขั้น)

## ราคาซื้อ 3 ไม้แรก (จาก P0 = 502.1100 USDT)
1. ไม้ที่ 1: `P1 = 502.1100 * 0.97 = 486.0467` USDT
2. ไม้ที่ 2: `P2 = 502.1100 * 0.97^2 ≈ 471.4653` USDT
3. ไม้ที่ 3: `P3 = 502.1100 * 0.97^3 ≈ 457.4213` USDT

ถ้าเปิด `size_mode: fibonacci` และตั้ง `n_steps = 5` จะได้สัดส่วนคำสั่งตามลำดับ [1, 1, 2, 3, 5] เท่าของ `base_order_quote`
หรือจัดสเกลอัตโนมัติจาก `b_alloc` เพื่อให้ไม้แรกเล็กกว่าและทยอยเพิ่มน้ำหนักตาม Fibonacci

## ใช้งาน 2 รูปแบบที่ถามหา
- **แบบไป-กลับทีละไม้**: บอทจะเข้าซื้อเมื่อราคาลงถึง `P1` แล้วตั้งขายทำกำไร เมื่อปิดดีลนั้นแล้วจึงรอให้ราคาลงถึง `P2` และ `P3` ตามลำดับ (ตามกฎ trail / time caps เดิม)
- **แบบไปทีเดียว 3 ไม้แล้วรอขายรวดเดียว**: ปล่อยให้ราคาลงมาชนทั้ง `P1`, `P2`, `P3` จนครบ จากนั้นถือสถานะรวมแล้วค่อยขายออกในครั้งเดียวเมื่อเข้าเงื่อนไขทำกำไรหรือครบเวลาที่ตั้งไว้
- **หลังสะสมข้อมูลเพียงพอ**: ค่า `d_buy` จะถูกปรับอัตโนมัติตามความถี่/ความผันผวนล่าสุด (ดู `adaptive_ladder` ใน `config.yaml`) เพื่อให้จังหวะวางบันไดสอดคล้องกับสภาพตลาดมากขึ้น

หมายเหตุ: หาก `P0` เปลี่ยน (เพราะเริ่มรอบใหม่ที่ราคาตลาดต่างไป) ทุกระดับจะขยับตามสูตรเดียวกัน